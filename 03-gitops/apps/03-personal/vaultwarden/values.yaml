# Vaultwarden setup using CloudNativePG for LAN/Tailscale access

service:
  type: ClusterIP
  port: 8080

# Domain setting for Tailscale
domain: "https://vaultwarden.tailce4610.ts.net"

# Database configuration - using CloudNativePG with existing secret
database:
  type: "postgresql"
  host: "vaultwarden-postgres-rw"  # CloudNativePG creates this service
  port: "5432"
  # Use existing secret instead of plain text
  existingSecret: "vaultwarden-postgres-user"
  existingSecretUserKey: "username"
  existingSecretPasswordKey: "password"

# Storage for attachments only (database is separate)
storage:
  data:
    name: "vaultwarden-data"
    size: "5Gi"
    class: "longhorn"
    accessMode: ReadWriteOnce

# Admin token - using existing secret
adminToken:
  existingSecret: "vaultwarden-admin-token"
  existingSecretKey: "adminToken"

# Personal LAN settings
signupsAllowed: false
signupsVerify: false  # Skip email verification for LAN

# Resource limits
resources:
  limits:
    memory: "512Mi"
    cpu: "500m"
  requests:
    memory: "256Mi"
    cpu: "100m"